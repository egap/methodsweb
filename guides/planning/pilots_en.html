<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Kaylyn Jackson Schiff">
<meta name="author" content="Daniel S. Schiff">
<meta name="author" content="Natália S. Bueno">

<title>10 Things to Know About Pilot Studies – Methods</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../img/egap-logo.svg" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Methods</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../guides.html"> 
<span class="menu-text">Methods guides</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../software.html"> 
<span class="menu-text">Software</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../teaching.html"> 
<span class="menu-text">Teaching</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">10 Things to Know About Pilot Studies</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">10 Things to Know About Pilot Studies</h1>
</div>

<div class="quarto-title-meta">
    
    
    
    
</div>
  
</header>

<nav id="TOC" role="doc-toc">
    <h4 id="toc-title">Contents</h4>
   
  <ul>
  <li><a href="#what-is-a-pilot-and-what-is-it-good-for" id="toc-what-is-a-pilot-and-what-is-it-good-for"><span class="header-section-number">1</span> What is a pilot, and what is it good for?</a></li>
  <li><a href="#pilots-are-useful-for-improving-your-studys-measurement-approach-in-relation-to-your-theory" id="toc-pilots-are-useful-for-improving-your-studys-measurement-approach-in-relation-to-your-theory"><span class="header-section-number">2</span> Pilots are useful for improving your study’s measurement approach in relation to your theory</a></li>
  <li><a href="#pilots-can-also-help-you-to-prepare-for-the-logistics-of-running-your-experiment" id="toc-pilots-can-also-help-you-to-prepare-for-the-logistics-of-running-your-experiment"><span class="header-section-number">3</span> Pilots can also help you to prepare for the logistics of running your experiment</a></li>
  <li><a href="#you-can-use-pilots-for-power-analysis-or-for-calculating-minimum-detectable-effects" id="toc-you-can-use-pilots-for-power-analysis-or-for-calculating-minimum-detectable-effects"><span class="header-section-number">4</span> You can use pilots for power analysis or for calculating minimum detectable effects</a></li>
  <li><a href="#piloting-may-help-you-secure-funding-and-support-for-your-research" id="toc-piloting-may-help-you-secure-funding-and-support-for-your-research"><span class="header-section-number">5</span> Piloting may help you secure funding and support for your research</a></li>
  <li><a href="#you-can-use-a-pilot-to-get-feedback-on-your-study-design" id="toc-you-can-use-a-pilot-to-get-feedback-on-your-study-design"><span class="header-section-number">6</span> You can use a pilot to get feedback on your study design</a></li>
  <li><a href="#keep-an-eye-out-for-ethical-considerations-when-piloting" id="toc-keep-an-eye-out-for-ethical-considerations-when-piloting"><span class="header-section-number">7</span> Keep an eye out for ethical considerations when piloting</a></li>
  <li><a href="#be-transparent-about-how-your-pilot-informs-the-design-of-your-main-study" id="toc-be-transparent-about-how-your-pilot-informs-the-design-of-your-main-study"><span class="header-section-number">8</span> Be transparent about how your pilot informs the design of your main study</a></li>
  <li><a href="#explore-unknowns" id="toc-explore-unknowns"><span class="header-section-number">9</span> Explore unknowns</a></li>
  <li><a href="#a-pilot-is-part-of-a-broader-sequence-of-research-activities" id="toc-a-pilot-is-part-of-a-broader-sequence-of-research-activities"><span class="header-section-number">10</span> A pilot is part of a broader sequence of research activities</a></li>
  <li><a href="#references" id="toc-references"><span class="header-section-number">11</span> References</a></li>
  </ul>
</nav>
<section id="what-is-a-pilot-and-what-is-it-good-for" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> What is a pilot, and what is it good for?</h1>
<p>During the process of planning an experiment, researchers often face questions regarding their study’s theoretical and conceptual underpinnings, its measurement approach, and associated logistics. Pilot studies can help you to consider and improve these elements of your research whether you are running a survey, lab, or field experiment. In particular, <em>a pilot study is a smaller scale preliminary test or trial run, used to assist with the preparation of a more comprehensive investigation</em>. Pilots are typically administered before a research design is finalized in order to evaluate and improve the feasibility, reliability, and validity of the proposed study.</p>
<p>While it may be tempting to think about a pilot as simply a miniature version of one’s final study, helpful for doing an initial test of one’s hypotheses, pilot studies are neither especially appropriate for <a href="https://methods.egap.org/guides/analysis-procedures/hypothesis-testing_en.html">hypothesis testing</a>, nor are they limited to it. Given smaller sample sizes, pilots are typically underpowered for evaluating hypotheses. Besides, deciding whether to continue a study based on initial results contributes to the “file drawer” problem where important studies and results—including <a href="https://methods.egap.org/guides/interpretation/null-results_en.html">null results</a>—are never published, leading to misrepresentative bodies of published research <span class="citation" data-cites="franco_et_al_2014">(<a href="#ref-franco_et_al_2014" role="doc-biblioref">Franco, Malhotra, and Simonovits 2014</a>)</span>.</p>
<p>Fortunately, as depicted in the table below, pilots can be useful for a wide range of research purposes including theory development, research design, improving measurement, sampling considerations, evaluating logistics, pre-planning analysis, weighing ethical considerations, and communicating one’s research (<span class="citation" data-cites="van_teijlingen_et_al_2001">Teijilngen et al. (<a href="#ref-van_teijlingen_et_al_2001" role="doc-biblioref">2001</a>)</span>; <span class="citation" data-cites="thabane_et_al_2010">Thabane et al. (<a href="#ref-thabane_et_al_2010" role="doc-biblioref">2010</a>)</span>). Each of these activities can help improve the quality of one’s main study and render it more compelling and ultimately successful.</p>
<p>In the sections below, we review these many benefits. First, we consider how pilots can assist with a study’s theory and measurement approach, evaluate its logistical feasibility, and provide information about the sample size needed to test hypotheses. In addition, we discuss how piloting may help you secure research funding and institutional support, gather feedback, and incorporate best practices in research ethics. Finally, we offer recommendations on how to use pilots to inform your main study design, reveal important unknowns, and contribute to your broader research agenda.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><strong>Theory Development</strong></th>
<th style="text-align: center;"><strong>Research Design</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Refining your research questions and hypotheses</td>
<td style="text-align: center;">Evaluating suitability of study context for answering research questions</td>
</tr>
<tr class="even">
<td style="text-align: center;">Determining initial plausibility of theorized mechanisms</td>
<td style="text-align: center;">Determining construction and strength of treatments</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Identifying additional research questions of interest</td>
<td style="text-align: center;">Determining number, levels, and timing of treatments</td>
</tr>
<tr class="even">
<td style="text-align: center;">Exploring unknowns related to your research questions and hypotheses</td>
<td style="text-align: center;">Considering alternative and/or multiple measures of participant response to treatment</td>
</tr>
</tbody>
</table>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><strong>Measurement</strong></th>
<th style="text-align: center;"><strong>Sample</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Testing alternative treatments and outcomes to improve clarity, validity, and reliability</td>
<td style="text-align: center;">Determining power and sample size needed for main study</td>
</tr>
<tr class="even">
<td style="text-align: center;">Uncovering issues related to asymmetry in delivery and measurement of treatments and/or outcomes</td>
<td style="text-align: center;">Evaluating recruitment procedures and eligibility criteria</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Considering covariate measurement approach</td>
<td style="text-align: center;">Testing participant understanding of research tools and procedures</td>
</tr>
<tr class="even">
<td style="text-align: center;">Ensuring successful data collection and data entry</td>
<td style="text-align: center;">Assessing participant compliance and treatment uptake</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Identifying additional information that may need to be collected</td>
<td style="text-align: center;">Assessing participant response rate, quality, and attrition</td>
</tr>
<tr class="even">
<td style="text-align: center;">Considering the use of combined measures such as scales and indices</td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><strong>Logistics</strong></th>
<th style="text-align: center;"><strong>Analysis</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Determining time and resources needed to conduct main study</td>
<td style="text-align: center;">Considering feasibility of software, statistical techniques, or other analytic tools given preliminary data</td>
</tr>
<tr class="even">
<td style="text-align: center;">Evaluating randomization procedure</td>
<td style="text-align: center;">Preparing analysis procedures for main study</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Assessing research team understanding of protocols and procedures</td>
<td style="text-align: center;">Considering feasibility of incorporating data from partners or other sources</td>
</tr>
<tr class="even">
<td style="text-align: center;">Determining partner capacity and willingness</td>
<td style="text-align: center;">Considering responses to missingness in data</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Training research team members and partners</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;">Assessing inter-researcher reliability in data collection, procedures, and analysis</td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><strong>Ethics</strong></th>
<th style="text-align: center;"><strong>Communicating Research</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Ensuring participant safety and well-being</td>
<td style="text-align: center;">Collecting preliminary data to share externally</td>
</tr>
<tr class="even">
<td style="text-align: center;">Evaluating consent procedures</td>
<td style="text-align: center;">Soliciting feedback on research design</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Assessing participant time and burdens</td>
<td style="text-align: center;">Leveraging pilot results transparently to explain design choices for main study</td>
</tr>
<tr class="even">
<td style="text-align: center;">Ensuring normative acceptability of study elements in given context</td>
<td style="text-align: center;">Demonstrating research team capacity and competence</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Assessing privacy and confidentiality procedures</td>
<td style="text-align: center;">Persuading funders, ethics committees, and other stakeholders of study feasibility and value</td>
</tr>
<tr class="even">
<td style="text-align: center;">Assessing security of data and other study materials</td>
<td style="text-align: center;">Informing interested scholars and other stakeholders</td>
</tr>
<tr class="odd">
<td style="text-align: center;"></td>
<td style="text-align: center;">Educating students about research practices</td>
</tr>
</tbody>
</table>
</section>
<section id="pilots-are-useful-for-improving-your-studys-measurement-approach-in-relation-to-your-theory" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Pilots are useful for improving your study’s measurement approach in relation to your theory</h1>
<p>Fewer things are more frustrating for a researcher than investing significant resources and time into a study only to find that one’s outcome measures lack reliability to accurately assess the concepts of interest, or that participants did not receive treatments in the way that was anticipated. Unexpected results are common, even when one approaches measurement carefully, as operationalizing concepts into an <a href="https://methods.egap.org/guides/data-collection/measurement_en.html">effective measurement strategy</a> in the social sciences is a complex endeavor.</p>
<p>As a remedy, pilots are great for testing different versions of treatments and outcomes to see which of them “work” or whether any changes may be needed to increase validity, reliability, and clarity. For example, you can include a larger set of outcome measures in a pilot than is feasible in the main study, and perform simple factor analysis to identify a preferred subset of measures. Pilot results can also inform whether it makes sense to create indices or scales in order to improve reliability and decrease variance. Subtle variation in the strength, nature, timing, or number of treatments can also significantly alter study findings. Pilots offer researchers the opportunity to evaluate multiple possibilities for one’s treatment design, and to assess how these options influence participant compliance, uptake of treatment, attrition, and more.</p>
<p>When refining one’s approach to measuring treatments, outcomes, and covariates, it is especially important to keep in mind how these elements of one’s research design speak to the broader concepts and theory under study. Will the data you receive provide the necessary information regarding the theoretical elements and causal mechanisms under study? Are there other causal channels that may be in play, or <a href="https://methods.egap.org/guides/research-questions/heterogeneous-effects_en.html">heterogeneous effects</a> within subgroups that you hadn’t thought about previously? These kinds of considerations can inform changes to your research design, such as alterations to your <a href="https://methods.egap.org/guides/data-collection/randomization_en.html">randomization strategy</a>, the introduction of new dimensions in your treatments, and decisions about which aspects of your study are core and which can be saved for a later date.</p>
<p>When you begin a pilot study, you may have an initial conception of your research questions, hypotheses, and measurement approach; but with a careful pilot, you have the opportunity to refine all of these aspects in a way that can increase your (and others’) confidence in the overall quality of the study.</p>
</section>
<section id="pilots-can-also-help-you-to-prepare-for-the-logistics-of-running-your-experiment" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Pilots can also help you to prepare for the logistics of running your experiment</h1>
<p>Perhaps the most often emphasized purpose of pilots is to work out any logistical kinks that might impede the main study <span class="citation" data-cites="thabane_et_al_2010">(<a href="#ref-thabane_et_al_2010" role="doc-biblioref">Thabane et al. 2010</a>)</span>. Logistical considerations include those implicating a project’s overall resources, the study team, the participants, and the administration of study instruments.</p>
<p>In terms of participant logistics, is important to establish whether your study participants understand the research tools and procedures, are able to receive treatment, and feel comfortable answering questions or performing tasks. Based on how successful the pilot is, you may find ways to improve your recruitment strategy, adjust your eligibility criteria, and improve the clarity of your research instruments. It is also important to ensure that basic elements like randomization and data collection are working as anticipated. Data simulations and pilots with very small samples can also be used to test certain study elements.</p>
<p>Similar considerations apply to your study team and partners. Do they understand the protocols or might they require additional training, for example, to promote reliability in procedures such as data collection? Are there any asymmetries in delivery or measurement of treatment or outcomes of which you were not aware? A pilot can also be very helpful for determining the resources needed to conduct the main study. For example, how much time does it take—for both members of the study team and participants—and what might this imply for the size of the sample and complexity of the research design that is ultimately feasible for the main study?</p>
<p>While the specific logistical considerations will vary depending on whether your research design is centered around a field experiment, survey experiment, lab experiment, or something else, pilots will help you ensure that your experiment goes as planned. Thus, when constructing a pilot study, consider making a list of the logistical elements you want to evaluate and designing the pilot to facilitate answering associated questions. Asking your participants whether they were able to “hear the video” or “understood the instructions” can make your research easier down the road.</p>
</section>
<section id="you-can-use-pilots-for-power-analysis-or-for-calculating-minimum-detectable-effects" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> You can use pilots for power analysis or for calculating minimum detectable effects</h1>
<p>Another common purpose of pilot studies, in light of limited resources, is assessing <a href="https://methods.egap.org/guides/assessing-designs/power_en.html">statistical power</a>, which helps to avoid the risk of false negatives (or false positives) from underpowered studies. As described in the <a href="https://methods.egap.org/guides/assessing-designs/power_en.html">EGAP methods guide about power analysis</a>, a researcher’s goal is to answer the following: “supposing there truly is a treatment effect and you were to run your experiment a huge number of times, how often will you get a statistically significant result?” To improve the likelihood that your main study will achieve a typical target power value of 80%, you can use a pilot study combined with careful simulations. These results are helpful for determining appropriate sample sizes, the extent to which you can subset your sample for various analyses, and whether adjustments may be necessary for increasing power.</p>
<p>Traditionally, a pilot study is used to obtain an estimate of the effect size, which becomes the presumed estimate for simulations used to determine power and sample size in one’s main study. However, the <a href="https://declaredesign.org/blog/2019-01-23-pilot-studies.html">DeclareDesign</a> cautions that effect size estimates are very noisy in small pilots, especially when true effect sizes are small (for example, under 0.2 sd). As an alternative, they recommend using pilot studies to estimate the standard deviation of the outcome variable. Using this estimate, one can easily obtain an unbiased estimate of a main study’s minimum detectable effect (MDE) for a given outcome and with 80% power as 2.8 times the estimated standard error of the associated outcome variable <span class="citation" data-cites="gelman_hill_2006">(<a href="#ref-gelman_hill_2006" role="doc-biblioref">Gelman and Hill 2006</a>)</span>. The goal is to ensure that the MDE is small enough that the study would capture any substantively meaningful effect.</p>
<p>Using the recommendations from DeclareDesign, we provide sample code based on a hypothetical pilot study. In the code below, we assume we have already conducted a pilot study and have calculated the standard deviation of a key outcome measure for both the control and treatment groups. Next, we use these estimates to calculate MDEs for different possible sample sizes, in order to inform our target sample size for a future main study.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Standard deviations of outcome measure for treatment &amp; control groups calculated from pilot study results</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#The ones provided are for purposes of demonstration</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#We assume one treatment and control group--you will need to adjust to study specifics</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>sd_control <span class="ot">&lt;-</span> <span class="fl">1.5</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>sd_treat <span class="ot">&lt;-</span> <span class="fl">1.2</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">#MDE calculation for various possible sample sizes</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>N <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from=</span><span class="dv">500</span>, <span class="at">to=</span><span class="dv">3000</span>, <span class="at">by=</span><span class="dv">100</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>MDE <span class="ot">&lt;-</span> <span class="fu">vector</span>()</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(N)){</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">#We assume an equal number of participants in treatment and control--you will need to adjust to study specifics</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  MDE[i] <span class="ot">&lt;-</span> <span class="fl">2.8</span> <span class="sc">*</span> <span class="fu">sqrt</span>((sd_control<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span>(N[i]<span class="sc">/</span><span class="dv">2</span>)) <span class="sc">+</span> (sd_treat<span class="sc">^</span><span class="dv">2</span><span class="sc">/</span>(N[i]<span class="sc">/</span><span class="dv">2</span>))) <span class="co">#The true effect size must be at least 2.8 standard errors from zero to detect it with 80% probability using 95% confidence intervals (Gelman and Hill 2006). To estimate the standard error of the ATE, we use equation 3.6 in @gerber_green_2012. Thus, simply multiply 2.8 by the standard error of the ATE to calculate the MDE. </span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co">#Visualizing results to identify target sample size for main study</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>mde_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">cbind</span>(N, MDE))</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>mde_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mde_data, <span class="fu">aes</span>(<span class="at">x=</span>N, <span class="at">y=</span>MDE)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Sample Size"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"MDE"</span>) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"Minimum Detectable Effect (MDE) for Main Study by Sample Size"</span>) <span class="sc">+</span> </span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> .<span class="dv">2</span>, <span class="at">lty =</span> <span class="st">"dashed"</span>)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>mde_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="pilots_en_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Based on the hypothetical standard deviations in the control and treatment groups from the pilot study, the main study would need a sample size of approximately 1,500 to ensure that effect sizes as small as 0.2 sd are detectable. While calculating the MDE based on pilot results is straightforward, determining how small an MDE should be is more subjective, and should be informed by theory and prior work.</p>
<p>MDE calculations are based on the design of the pilot and the specific outcome measures. Thus, you may need to perform MDE calculations for each estimand of interest to determine what sample sizes are needed and which hypotheses can be addressed with sufficient power given your experimental design. Keep in mind that as you use pilot results to refine your study design, including treatments and outcomes, the relevant standard deviations of the outcome measures and the resultant MDE calculations may change. Another quick pilot is an option, though it is important to take resource constraints into account.</p>
</section>
<section id="piloting-may-help-you-secure-funding-and-support-for-your-research" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Piloting may help you secure funding and support for your research</h1>
<p>Pilots are not only helpful for improving the quality of your main study, they may also help to ensure you have the support and funding to enable your study to go forward. Given a general trend of tightening of per-researcher funding, particularly for smaller projects <span class="citation" data-cites="bloch_sorensen_2015">(<a href="#ref-bloch_sorensen_2015" role="doc-biblioref">Bloch and Sørensen 2015</a>)</span>, and a movement towards evidence-based decision-making, you may wish to draw on pilots to provide initial evidence that your study is worthwhile. For example, the National Science Foundation (NSF) recognizes the need for more early-stage exploratory studies that can provide a basis for future larger-scale studies, and <a href="https://www.tessexperiments.org/">Time-sharing Experiments for the Social Sciences (TESS)</a> notes that “Proposals that report trial runs of novel and focal ideas will be viewed as more credible.”</p>
<p>This does not entail that one needs to show that effect sizes are large enough nor that hypotheses are likely to be confirmed. Instead, a pilot can demonstrate that your research project is feasible in terms of time and resources, that your study design is adequate for answering the research questions proposed, and that your research team has the expertise and capacity to administer the study, perform analyses, and even present results in a compelling fashion <span class="citation" data-cites="van_teijlingen_et_al_2001">(<a href="#ref-van_teijlingen_et_al_2001" role="doc-biblioref">Teijilngen et al. 2001</a>)</span>. In a similar fashion, piloting can help you to recruit study team members and organizational partners, or solicit institutional support.</p>
</section>
<section id="you-can-use-a-pilot-to-get-feedback-on-your-study-design" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> You can use a pilot to get feedback on your study design</h1>
<p>Sharing initial findings, successes, and challenges is a great way to help you prepare for your main study. In light of the growth of the open science movement <span class="citation" data-cites="christensen_et_al_2020">(<a href="#ref-christensen_et_al_2020" role="doc-biblioref">Christensen et al. 2020</a>)</span>, conferences and workshops are increasingly open to accepting submissions based on pre-analysis plans and pilot results. Whether through these more formal venues, or by reaching out to colleagues or experts, you can use pilot results to receive feedback about your study design, such as strategies to address possible challenges and unexplored theoretical or empirical directions that you can incorporate in your main study.</p>
<p>Further, it can take a long time to complete an experimental study and publish results. Sharing intermediate findings allows you to coordinate with other researchers in the field, helping you to align your work and incorporate recent theoretical and empirical innovations relevant to your study.</p>
<p>Ultimately, the design and piloting stage is the <strong>best</strong> time to receive feedback, as you still have time to make improvements. In contrast, most key research design decisions will already have been finalized by the time your study undergoes formal peer review for publication.</p>
</section>
<section id="keep-an-eye-out-for-ethical-considerations-when-piloting" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Keep an eye out for ethical considerations when piloting</h1>
<p>When you design your study initially, all of the relevant <a href="https://egap.org/wp-content/uploads/2020/05/egap-committee-memo-on-the-report-of-the-apsa-ad-hoc-committee-on-human-subjects-research.pdf">ethical considerations</a> and risks may not be immediately apparent. The piloting stage is thus a good opportunity to review whether any risks or harms you anticipated may come into play and whether still other ethical considerations should be incorporated into your main study.</p>
<p>You can use your pilot to evaluate whether your procedures around informed consent are adequate and to assess the extent of burdens such as time required of participants. You may find, for example, that certain topics—such as mental health and personal identity—are more sensitive than anticipated, or that survey questions (even those based on validated and popular measures) use outdated and offensive language. The best way to find out is to ask. Consider including open-ended survey questions or talking to participants directly to determine what participants think of the study in terms of its normative and cultural acceptability in a given context.</p>
<p>In addition, the piloting process is a good time to practice your procedures around privacy, confidentiality, and security of data and other materials. You may find that other procedures for obtaining consent, ensuring participant safety and well-being, and promoting privacy and anonymity are necessary to improve the ethical dimensions of your main study. This can include decreasing risks as well as increasing benefits to participants, such as by providing helpful resources and information that may help to mitigate possible harms.</p>
<p>Note that this doesn’t imply any less ethical consideration should be given to your pilot itself. All appropriate safeguards, including IRB review, apply to human subjects research for a pilot study as well.</p>
</section>
<section id="be-transparent-about-how-your-pilot-informs-the-design-of-your-main-study" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Be transparent about how your pilot informs the design of your main study</h1>
<p>As noted, it’s helpful to pre-identify a set of questions about logistics, measurement, or other features of your study that you believe a pilot can help to answer. Putting these questions into writing, designing your pilot to facilitate answering them, and reporting on how the answers shape any modifications to your main study is a way in which you can promote transparency in research. This includes transparency <em>within</em> one’s study team about the purposes of a pilot, as well as for external audiences such as funders or peer reviewers. Transparency helps to alleviate concerns such as the file drawer problem, for example by demonstrating that a pilot study does not function as a method for cherry-picking statistically significant results. It also facilitates understanding and receipt of feedback.</p>
<p>The table below is a simple illustrative example of how one could transparently present lessons learned from a hypothetical pilot, for example, in a pre-analysis plan or research proposal. The first column indicates the question the pilot is intended to help answer, in this case questions related to logistical adequacy, manipulation checks, delivery of treatments, and measurement of outcomes. The second column presents the associated findings from the pilot, and the third column discusses how the lessons learned will inform design choices for the main study.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><strong>Questions</strong></th>
<th style="text-align: center;"><strong>Pilot Results</strong></th>
<th style="text-align: center;"><strong>Design Decision</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Can participants hear the video treatments?</td>
<td style="text-align: center;">10% reported difficulty.</td>
<td style="text-align: center;">We will add subtitles to the video treatments.</td>
</tr>
<tr class="even">
<td style="text-align: center;">Can participants identify the politician party, indicating successful treatment?</td>
<td style="text-align: center;">75% correctly identified the politician party.</td>
<td style="text-align: center;">We will mention the politician party additional times to make this treatment component more memorable to participants.</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Which video treatments from the available options are best to use?</td>
<td style="text-align: center;">Participants were more familiar with some politicians in the videos than others.</td>
<td style="text-align: center;">We will randomize subjects to a more familiar or less familiar politician and may explore heterogeneous effects by politician familiarity.</td>
</tr>
<tr class="even">
<td style="text-align: center;">What is the best way to measure uncertainty as an outcome?</td>
<td style="text-align: center;">Respondents appear to have been confused by bidirectional scales and questions with reversed scales.</td>
<td style="text-align: center;">We will use unidirectional scales and also consider the distribution (variance) of other key outcome measures.</td>
</tr>
</tbody>
</table>
</section>
<section id="explore-unknowns" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Explore unknowns</h1>
<p>While you may begin your study with a set of preestablished questions—or “known unknowns”— that your pilot can help to address, keep in mind that there is a whole universe of “unknown unknowns” left to be explored. Of course, not all of these will be relevant to your study, but some are likely to be. For example, you may find that the participants have vastly different interpretations of an informational treatment, understand survey scales differently, or are reluctant to share responses given a perceived political bias.</p>
<p>There are a few ways to explore these unknowns in your pilot study. You might wish to include additional exploratory outcome questions, collect extra covariate data, or use a variety of treatments drawing on innovative or untested ideas. Another great way to identify unknowns is through open-ended questions of study participants. Regardless of your study design, you might consider surveying or interviewing participants to ask “what they think about topic X,” or “what comes to mind when they hear the term Y.” The world is often more complex than researchers model in their study designs, and study participants often have more diverse perspectives and relationships with the issues at hand than researchers expect.</p>
<p>Through this process, you may identify novel research questions, potential theoretical dimensions or causal mechanisms, and hypotheses that you had not originally formulated when you began studying the topic. Exploring unknowns can therefore lead to refining the ideas you had originally conceived of, as you are unlikely to have determined the best version of your study from the beginning. It can also lead to entirely novel considerations and ideas altogether, some of which you may be able to incorporate into the current study or future studies.</p>
<p>Overall, pilots afford a wonderful opportunity for open-ended exploration and idea generation.</p>
</section>
<section id="a-pilot-is-part-of-a-broader-sequence-of-research-activities" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> A pilot is part of a broader sequence of research activities</h1>
<p>While we’ve talked about research in terms of “pilots” and “main studies,” this is an oversimplification of the research process. Indeed one can (and often should) employ multiple pilot studies, perhaps with different sample sizes, to evaluate different questions and to continue refining one’s research design as new questions and possibilities emerge. Pilot studies certainly do set the stage for main studies as well as subsequent “follow-up” studies, but there may not be a sharp demarcation between these kinds of studies. As depicted in the graphic, pilot studies do not merely lead to main studies. They can also help one develop new ideas and they may serve as a venue through which one can contribute to or coordinate with the broader research community around topics of shared interest.</p>
<center>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="pilots_research_sequence.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>The Role of Pilots in Experimental Research</figcaption>
</figure>
</div>
</center>
<!--We can share if you are able to upload the image to the EGAP website.-->
<p>As pilots are part of this broader sequence of research activities, an important consideration is what portion of one’s funding and resources should be allocated to a pilot study versus one’s main study. Researchers may be discouraged from devoting research resources to pilots due to a perception that pilots only provide preliminary data that cannot be used for final research products. While there is no simple “rule of thumb” about the share of the budget that researchers should apply to pilots, we believe that pilots can pay off when they empower researchers to improve their study designs and make more grounded decisions about their research.</p>
<p>Administering a second pilot study is especially prudent when pilot results or procedures deviate significantly from your expectations, or if you make substantial alterations to your design. Piloting one or more times is particularly beneficial for field experiments, as researchers often have just one opportunity to successfully implement their full study. However, when resources are constrained, you may opt instead to use simulations to evaluate alternative research designs based on results from your single pilot study. The <a href="https://declaredesign.org/">DeclareDesign</a> package in R is a helpful resource.</p>
<p>In short, pilots are neither pre-tests of hypotheses nor merely checks on basic study logistics that deplete one’s research funds. Instead, pilots are living and breathing elements of the broader research process that provide value in their own right.</p>
</section>
<section id="references" class="level1" data-number="11">




</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">11 References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-bloch_sorensen_2015" class="csl-entry" role="listitem">
Bloch, Carter, and Mads P. Sørensen. 2015. <span>“The Size of Research Funding: Trends and Implications.”</span> <em>Science and Public Policy</em> 42 (1): 30–43.
</div>
<div id="ref-christensen_et_al_2020" class="csl-entry" role="listitem">
Christensen, Garret, Zenan Wang, Elizabeth Levy Paluck, Nicholas Swanson, David Birke, Edward Miguel, and Rebecca Littman. 2020. <span>“Open Science Practices Are on the Rise: The State of Social Science (3S) Survey.”</span>
</div>
<div id="ref-franco_et_al_2014" class="csl-entry" role="listitem">
Franco, Annie, Neil Malhotra, and Gabor Simonovits. 2014. <span>“Publication Bias in the Social Sciences: Unlocking the File Drawer.”</span> <em>Science</em> 345 (6203): 1502–5.
</div>
<div id="ref-gelman_hill_2006" class="csl-entry" role="listitem">
Gelman, Andrew, and Jennifer Hill. 2006. <em>Data Analysis Using Regression and Multilevel/Hierarchical Models</em>. Cambridge, United Kingdom: Cambridge University Press.
</div>
<div id="ref-van_teijlingen_et_al_2001" class="csl-entry" role="listitem">
Teijilngen, Edwin R. van, Anne-Marie Rennie, Vanora Hundley, and Wendy Graham. 2001. <span>“The Importance of Conducting and Reporting Pilot Studies: The Example of the Scottish Births Survey.”</span> <em>Journal of Advanced Nursing</em> 34 (3): 289–95.
</div>
<div id="ref-thabane_et_al_2010" class="csl-entry" role="listitem">
Thabane, Lehana, Jinhui Ma, Rong Chu, Ji Cheng, Afisi Ismaila, Lorena P. Rios, Robson Reid, Marroon Thabane, Lora Giangregorio, and Charles H. Goldsmith. 2010. <span>“A Tutorial on Pilot Studies: The What, Why and How.”</span> <em>BMC Medical Research Methodology</em> 10 (1): 1–10.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/methods\.egap\.org");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>